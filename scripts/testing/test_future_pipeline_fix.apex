// Test script to verify the Future Pipeline Analysis fix
System.debug('ğŸ§ª Testing Future Pipeline Analysis Fix...');

// ========================================
// TEST 1: Basic Future Pipeline Analysis
// ========================================

System.debug('=== TEST 1: Basic Future Pipeline Analysis ===');
try {
    ANAgentFuturePipelineAnalysisHandler.FuturePipelineRequest request = new ANAgentFuturePipelineAnalysisHandler.FuturePipelineRequest();
    request.analysisType = 'FUTURE_PIPELINE';
    request.operatingUnit = 'AMER ICE';
    
    List<ANAgentFuturePipelineAnalysisHandler.FuturePipelineResponse> responses = 
        ANAgentFuturePipelineAnalysisHandler.analyzeFuturePipeline(new List<ANAgentFuturePipelineAnalysisHandler.FuturePipelineRequest>{request});
    
    if (!responses.isEmpty()) {
        ANAgentFuturePipelineAnalysisHandler.FuturePipelineResponse response = responses[0];
        System.debug('âœ… Future Pipeline Results: ' + response.totalRecords + ' records');
        System.debug('ğŸ“Š Summary: ' + response.message);
        System.debug('ğŸ”„ Renewal Count: ' + response.renewalCount);
        System.debug('ğŸ”„ Cross-Sell Count: ' + response.crossSellCount);
        System.debug('ğŸ”„ Upsell Count: ' + response.upsellCount);
        
        if (response.success) {
            System.debug('ğŸ‰ SUCCESS: Future Pipeline Analysis now working!');
            if (response.detailedResults != null) {
                System.debug('ğŸ“‹ Detailed Results: ' + response.detailedResults);
            }
        } else {
            System.debug('âš ï¸ Response indicates failure: ' + response.message);
        }
    }
} catch (Exception e) {
    System.debug('âŒ Future Pipeline Test Failed: ' + e.getMessage());
    System.debug('ğŸ” Stack Trace: ' + e.getStackTraceString());
}

// ========================================
// TEST 2: Renewals Analysis
// ========================================

System.debug('=== TEST 2: Renewals Analysis ===');
try {
    ANAgentFuturePipelineAnalysisHandler.FuturePipelineRequest request = new ANAgentFuturePipelineAnalysisHandler.FuturePipelineRequest();
    request.analysisType = 'RENEWALS';
    request.operatingUnit = 'UKI';
    
    List<ANAgentFuturePipelineAnalysisHandler.FuturePipelineResponse> responses = 
        ANAgentFuturePipelineAnalysisHandler.analyzeFuturePipeline(new List<ANAgentFuturePipelineAnalysisHandler.FuturePipelineRequest>{request});
    
    if (!responses.isEmpty()) {
        ANAgentFuturePipelineAnalysisHandler.FuturePipelineResponse response = responses[0];
        System.debug('âœ… Renewals Results: ' + response.totalRecords + ' records');
        System.debug('ğŸ“Š Summary: ' + response.message);
        System.debug('ğŸ”„ Renewal Count: ' + response.renewalCount);
        System.debug('ğŸ’° Most Important Renewal Amount: ' + response.mostImportantRenewalAmount);
        System.debug('ğŸ·ï¸ Most Important Renewal Product: ' + response.mostImportantRenewalProduct);
        System.debug('ğŸ’¡ Most Important Renewal Reason: ' + response.mostImportantRenewalReason);
        
        if (response.success) {
            System.debug('ğŸ‰ SUCCESS: Renewals Analysis now working!');
        } else {
            System.debug('âš ï¸ Response indicates failure: ' + response.message);
        }
    }
} catch (Exception e) {
    System.debug('âŒ Renewals Test Failed: ' + e.getMessage());
    System.debug('ğŸ” Stack Trace: ' + e.getStackTraceString());
}

// ========================================
// TEST 3: Cross-Sell Analysis
// ========================================

System.debug('=== TEST 3: Cross-Sell Analysis ===');
try {
    ANAgentFuturePipelineAnalysisHandler.FuturePipelineRequest request = new ANAgentFuturePipelineAnalysisHandler.FuturePipelineRequest();
    request.analysisType = 'CROSS_SELL';
    request.operatingUnit = 'AMER REG';
    
    List<ANAgentFuturePipelineAnalysisHandler.FuturePipelineResponse> responses = 
        ANAgentFuturePipelineAnalysisHandler.analyzeFuturePipeline(new List<ANAgentFuturePipelineAnalysisHandler.FuturePipelineRequest>{request});
    
    if (!responses.isEmpty()) {
        ANAgentFuturePipelineAnalysisHandler.FuturePipelineResponse response = responses[0];
        System.debug('âœ… Cross-Sell Results: ' + response.totalRecords + ' records');
        System.debug('ğŸ“Š Summary: ' + response.message);
        System.debug('ğŸ”„ Cross-Sell Count: ' + response.crossSellCount);
        
        if (response.success) {
            System.debug('ğŸ‰ SUCCESS: Cross-Sell Analysis now working!');
        } else {
            System.debug('âš ï¸ Response indicates failure: ' + response.message);
        }
    }
} catch (Exception e) {
    System.debug('âŒ Cross-Sell Test Failed: ' + e.getMessage());
    System.debug('ğŸ” Stack Trace: ' + e.getStackTraceString());
}

// ========================================
// TEST 4: Upsell Analysis
// ========================================

System.debug('=== TEST 4: Upsell Analysis ===');
try {
    ANAgentFuturePipelineAnalysisHandler.FuturePipelineRequest request = new ANAgentFuturePipelineAnalysisHandler.FuturePipelineRequest();
    request.analysisType = 'UPSELL';
    request.operatingUnit = 'EMEA Central';
    
    List<ANAgentFuturePipelineAnalysisHandler.FuturePipelineResponse> responses = 
        ANAgentFuturePipelineAnalysisHandler.analyzeFuturePipeline(new List<ANAgentFuturePipelineAnalysisHandler.FuturePipelineRequest>{request});
    
    if (!responses.isEmpty()) {
        ANAgentFuturePipelineAnalysisHandler.FuturePipelineResponse response = responses[0];
        System.debug('âœ… Upsell Results: ' + response.totalRecords + ' records');
        System.debug('ğŸ“Š Summary: ' + response.message);
        System.debug('ğŸ”„ Upsell Count: ' + response.upsellCount);
        
        if (response.success) {
            System.debug('ğŸ‰ SUCCESS: Upsell Analysis now working!');
        } else {
            System.debug('âš ï¸ Response indicates failure: ' + response.message);
        }
    }
} catch (Exception e) {
    System.debug('âŒ Upsell Test Failed: ' + e.getMessage());
    System.debug('ğŸ” Stack Trace: ' + e.getStackTraceString());
}

System.debug('ğŸ¯ Future Pipeline Analysis Fix Test Complete!');
System.debug('ğŸ“Š The "unexpected token: \'1\'" error should now be resolved!'); 
<?xml version="1.0" encoding="UTF-8"?>
<CustomObject xmlns="http://soap.sforce.com/2006/04/metadata">
    <label>Agent Utterance Log</label>
    <pluralLabel>Agent Utterance Logs</pluralLabel>
    <visibility>Public</visibility>
    <deploymentStatus>Deployed</deploymentStatus>
    <sharingModel>ReadWrite</sharingModel>
    <nameField>
        <displayFormat>LOG-{0000000}</displayFormat>
        <label>Log Name</label>
        <type>AutoNumber</type>
    </nameField>
    <fields>
        <fullName>Name</fullName>
        <label>Name</label>
        <type>Text</type>
        <length>80</length>
        <description>Auto-generated name for the log record</description>
    </fields>
    <fields>
        <fullName>Correlation_Id__c</fullName>
        <label>Correlation ID</label>
        <type>Text</type>
        <length>100</length>
        <description>Unique identifier for tracking requests across MCP and Apex</description>
    </fields>
    <fields>
        <fullName>Utterance__c</fullName>
        <label>Utterance</label>
        <type>LongTextArea</type>
        <length>32768</length>
        <description>The original agent utterance</description>
    </fields>
    <fields>
        <fullName>Chosen_Tool__c</fullName>
        <label>Chosen Tool</label>
        <type>Text</type>
        <length>100</length>
        <description>Tool selected by MCP or direct routing</description>
    </fields>
    <fields>
        <fullName>Args_JSON__c</fullName>
        <label>Args JSON</label>
        <type>LongTextArea</type>
        <length>32768</length>
        <description>Normalized arguments as JSON</description>
    </fields>
    <fields>
        <fullName>Handler_Class__c</fullName>
        <label>Handler Class</label>
        <type>Text</type>
        <length>100</length>
        <description>Handler class that processed the request</description>
    </fields>
    <fields>
        <fullName>Latency_ms__c</fullName>
        <label>Latency (ms)</label>
        <type>Number</type>
        <precision>18</precision>
        <scale>0</scale>
        <description>Execution time in milliseconds</description>
    </fields>
    <fields>
        <fullName>Result_Hash__c</fullName>
        <label>Result Hash</label>
        <type>Text</type>
        <length>255</length>
        <description>Hash of the result for comparison</description>
    </fields>
    <fields>
        <fullName>Rows__c</fullName>
        <label>Rows</label>
        <type>Number</type>
        <precision>18</precision>
        <scale>0</scale>
        <description>Number of rows returned</description>
    </fields>
    <fields>
        <fullName>Error__c</fullName>
        <label>Error</label>
        <type>LongTextArea</type>
        <length>32768</length>
        <description>Error message if any</description>
    </fields>
    <fields>
        <fullName>Execution_Path__c</fullName>
        <label>Execution Path</label>
        <type>Picklist</type>
        <valueSet>
            <restricted>true</restricted>
            <valueSetDefinition>
                <value>
                    <fullName>Direct</fullName>
                    <default>false</default>
                    <label>Direct</label>
                </value>
                <value>
                    <fullName>MCP</fullName>
                    <default>false</default>
                    <label>MCP</label>
                </value>
            </valueSetDefinition>
        </valueSet>
        <description>Whether this was executed via Direct or MCP path</description>
    </fields>
    <fields>
        <fullName>Success__c</fullName>
        <label>Success</label>
        <type>Checkbox</type>
        <defaultValue>false</defaultValue>
        <description>Whether the execution was successful</description>
    </fields>
    <fields>
        <fullName>Message__c</fullName>
        <label>Message</label>
        <type>LongTextArea</type>
        <length>32768</length>
        <description>Response message</description>
    </fields>
    <fields>
        <fullName>Test_Case__c</fullName>
        <label>Test Case</label>
        <type>Text</type>
        <length>100</length>
        <description>Test case identifier for UAT</description>
    </fields>
    <fields>
        <fullName>Parity_Status__c</fullName>
        <label>Parity Status</label>
        <type>Picklist</type>
        <valueSet>
            <restricted>true</restricted>
            <valueSetDefinition>
                <value>
                    <fullName>PASS</fullName>
                    <default>false</default>
                    <label>PASS</label>
                </value>
                <value>
                    <fullName>FAIL</fullName>
                    <default>false</default>
                    <label>FAIL</label>
                </value>
                <value>
                    <fullName>PENDING</fullName>
                    <default>true</default>
                    <label>PENDING</label>
                </value>
            </valueSetDefinition>
        </valueSet>
        <description>Parity comparison status</description>
    </fields>
    <fields>
        <fullName>Parity_Details__c</fullName>
        <label>Parity Details</label>
        <type>LongTextArea</type>
        <length>32768</length>
        <description>Detailed parity comparison results</description>
    </fields>
</CustomObject>